#include<pthread.h>
#include<stdio.h>

pthread_mutex_t mutexA = PTHREAD_MUTEX_INITIALIZER;
pthread_mutex_t mutexB = PTHREAD_MUTEX_INITIALIZER;

static void *func(void *){
  pthread_mutex_lock(&mutexA);
  printf("Lock A\n");
  pthread_mutex_lock(&mutexB);
  printf("Lock B\n");
  pthread_mutex_unlock(&mutexB);
  pthread_mutex_unlock(&mutexA);
  printf("Locks done\n");
}

int main(){
  pthread_t t0, t1;
  pthread_create(&t0, NULL, func, NULL);
  pthread_join(t0, NULL);
  return 0;
}
