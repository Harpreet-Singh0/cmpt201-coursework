#define _GNU_SOURCE
#include <stdio.h>
#include <unistd.h>
#include<errno.h>
#include<sys/wait.h>
#include<stdlib.h>
int main() {

  pid_t pid = fork();
  if (pid == 0) {
    execl("/bin/ls", "/bin/ls", "-a", "-l", (char *)NULL);
  } else {
    int wstatus;
    if(waitpid(-1, &wstatus, 0) == -1){
      perror("waitpid");
      exit(errno);
    }

    if(WIFEXITED(wstatus)){
      printf("Reason: %d\n",WEXITSTATUS(wstatus));
    }
  }

  printf("%d\n", getpid());
  return 0;
}
